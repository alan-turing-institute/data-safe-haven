Data Science VM

 - Remove from current Kerberos realm
   - sudo realm leave -U atiadmin dsgroupX.co.uk

 - Edit /etc/ldap.conf
   - Update LDAP server to <SERVER>.turingsafehaven.ac.uk:389
   - Update root bn to new LDAP service account on Safe Haven Management AD
   
 - Edit /etc/ldap.secret
   - Update LDAP bind user password
   
 - Edit /etc/krb5.conf and update as follows:
 
    DefaultDomain=TURINGSAFEHAVEN.AC.UK
 
    [realms]
      TURINGSAFEHAVEN.AC.UK = {
        kdc = <SERVER>.TURINGSAFEHAVEN.AC.UK
        kdc = <SERVER>.TURINGSAFEHAVEN.AC.UK
        admin_server = <SERVER>.TURINGSAFEHAVEN.AC.UK
        default_domain = TURINGSAFEHAVEN.AC.UK
        }
 
    [domain_realm]
       .turingsafehaven.ac.uk = TURINGSAFEHAVEN.AC.UK
       turingsafehaven.ac.uk = TURINGSAFEHAVEN.AC.UK

 - Join Kerberos realm
   - sudo realm join -U atiadmin turingsafehaven.ac.uk
   
 - Edit /etc/jupyterhub/juypterhub-ldapauthenticator
   - Update following items:
     - c.LDAPAuthenticator.server_address 
     - c.LDAPAuthenticator.bind_dn_template
     - c.LDAPAuthenticator.lookup_dn_search_user 
     - c.LDAPAuthenticator.lookup_dn_search_password 
     - c.LDAPAuthenticator.user_search_base
     
GITLAB Server
  
   - Edit /etc/gitlab/gitlab.rb
     - Update the following items under the LDAP settings section
       - label
       - host
       - bind_dn
       - password
       - base
       - user_filter
       
   - Add turingsafehaven.ac.uk to the "Restricted domains for sign-up" section within the GitLab settings panel.
   
   
HACKMD Server

   - Edit docker-compose.yml
     - Update the following items:
       - HMD_LDAP_PROVIDERNAME
       - HMD_LDAP_URL
       - HMD_LDAP_BINDDN
       - HMD_LDAP_SEARCHBASE
 
