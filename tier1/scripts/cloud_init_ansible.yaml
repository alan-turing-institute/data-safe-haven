#cloud-config


# Update package database on first boot (ie. run `apt-get update`)
package_update: true


# Upgrade installed packages on first boot (ie. run `apt-get upgrade`)
package_upgrade: true


apt:
  # Preserves the existing /etc/apt/sources.list
  preserve_sources_list: true

  # Add repositories
  sources:
    atom.list:
      source: "deb http://ppa.launchpad.net/ansible/ansible/ubuntu focal main"
      keyid: 6125E2A8C77F2818FB7BD15B93C4A3FD7BB9C367 # Launchpad PPA for Ansible, Inc.


write_files:
  - path: "/etc/inventory.yaml"
    owner: root:root
    permissions: "0444"
    content: |
      ---
      all:
        hosts:
          dsvm:
            ansible_host: ${dsvm_ip}
            ansible_user: ${dsvm_admin_user}
            ansible_ssh_private_key_file: ${local_file.admin_private_key.filename}

packages:
  - software-properties-common
  - ansible


ssh_keys:
  rsa_private: |
    
    

  rsa_public: ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAGEAoPRhIfLvedSDKw7XdewmZ3h8eIXJD7TRHtVW7aJX1ByifYtlL/HVzJ09nilCl+MSFrpbFnqjxyL8Rr/DSf7QcY/BrGUQbZn2Kc22PemAWthxHO18QJvWPocKJtlsDNi3 smoser@localhost
